<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Parameterize Â· FMI.jl</title><meta name="title" content="Parameterize Â· FMI.jl"/><meta property="og:title" content="Parameterize Â· FMI.jl"/><meta property="twitter:title" content="Parameterize Â· FMI.jl"/><meta name="description" content="Documentation for FMI.jl."/><meta property="og:description" content="Documentation for FMI.jl."/><meta property="twitter:description" content="Documentation for FMI.jl."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.png" alt="FMI.jl logo"/></a><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Introduction</a></li><li><a class="tocitem" href="../../features/">Features</a></li><li><a class="tocitem" href="../../faq/">FAQ</a></li><li><input class="collapse-toggle" id="menuitem-4" type="checkbox" checked/><label class="tocitem" for="menuitem-4"><span class="docs-label">Examples</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../overview/">Overview</a></li><li><a class="tocitem" href="../simulate/">Simulate</a></li><li class="is-active"><a class="tocitem" href>Parameterize</a><ul class="internal"><li><a class="tocitem" href="#License"><span>License</span></a></li><li><a class="tocitem" href="#Introduction"><span>Introduction</span></a></li><li><a class="tocitem" href="#Other-formats"><span>Other formats</span></a></li><li><a class="tocitem" href="#Code-section"><span>Code section</span></a></li></ul></li><li><a class="tocitem" href="../inputs/">Inputs</a></li><li><a class="tocitem" href="../multiple_instances/">Multiple instances</a></li><li><a class="tocitem" href="../modelica_conference_2021/">Modelica conference 2021</a></li><li><a class="tocitem" href="../manipulation/">Manipulation</a></li><li><a class="tocitem" href="../multithreading/">Multithreading</a></li><li><a class="tocitem" href="../multiprocessing/">Multiprocessing</a></li><li><a class="tocitem" href="../workshops/">Pluto Workshops</a></li><li><input class="collapse-toggle" id="menuitem-4-11" type="checkbox"/><label class="tocitem" for="menuitem-4-11"><span class="docs-label">FMIExport Examples</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../fmiexport_examples/Export/">Export Bouncing Ball</a></li></ul></li></ul></li><li><a class="tocitem" href="../../library/">User Level API - FMI.jl</a></li><li><input class="collapse-toggle" id="menuitem-6" type="checkbox"/><label class="tocitem" for="menuitem-6"><span class="docs-label">Developer Level API</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><input class="collapse-toggle" id="menuitem-6-1" type="checkbox"/><label class="tocitem" for="menuitem-6-1"><span class="docs-label">fmi version independent content</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../fmi_lowlevel_library_constants/">Types in FMI Import/Core .jl</a></li><li><a class="tocitem" href="../../fmi_lowlevel_modeldescription_functions/">Working with the FMI model description</a></li><li><a class="tocitem" href="../../fmi_lowlevel_library_functions/">Functions in FMI Import/Core .jl</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-6-2" type="checkbox"/><label class="tocitem" for="menuitem-6-2"><span class="docs-label">FMI2 specific content</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../fmi2_lowlevel_library_constants/">FMI2 Types in FMI Import/Core .jl</a></li><li><input class="collapse-toggle" id="menuitem-6-2-2" type="checkbox"/><label class="tocitem" for="menuitem-6-2-2"><span class="docs-label">FMI2 Functions in FMI Import/Core .jl</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../fmi2_lowlevel_modeldescription_functions/">Working with the FMI model description</a></li><li><a class="tocitem" href="../../fmi2_lowlevel_library_functions/">FMI Common Concepts for Model Exchange and Co-Simulation</a></li><li><a class="tocitem" href="../../fmi2_lowlevel_ME_functions/">FMI for Model Exchange</a></li><li><a class="tocitem" href="../../fmi2_lowlevel_CS_functions/">FMI for Co-Simulation</a></li></ul></li></ul></li><li><input class="collapse-toggle" id="menuitem-6-3" type="checkbox"/><label class="tocitem" for="menuitem-6-3"><span class="docs-label">FMI3 specific content</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../fmi3_lowlevel_library_constants/">FMI3 Types in FMI Import/Core .jl</a></li><li><input class="collapse-toggle" id="menuitem-6-3-2" type="checkbox"/><label class="tocitem" for="menuitem-6-3-2"><span class="docs-label">FMI3 Functions in FMI Import/Core .jl</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../fmi3_lowlevel_modeldescription_functions/">Working with the FMI model description</a></li><li><a class="tocitem" href="../../fmi3_lowlevel_library_functions/">FMI Common Concepts for Model Exchange and Co-Simulation</a></li><li><a class="tocitem" href="../../fmi3_lowlevel_ME_functions/">FMI for Model Exchange</a></li><li><a class="tocitem" href="../../fmi3_lowlevel_CS_functions/">FMI for Co-Simulation</a></li><li><a class="tocitem" href="../../fmi3_lowlevel_SE_functions/">FMI for Scheduled Execution</a></li></ul></li></ul></li></ul></li><li><a class="tocitem" href="../../index_library/">API Index</a></li><li><a class="tocitem" href="../../fmi-tool-info/">FMI Tool Information</a></li><li><a class="tocitem" href="../../related/">Related Publication</a></li><li><a class="tocitem" href="../../contents/">Contents</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Examples</a></li><li class="is-active"><a href>Parameterize</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Parameterize</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/ThummeTo/FMI.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands">ï‚›</span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Parameterize-a-FMU"><a class="docs-heading-anchor" href="#Parameterize-a-FMU">Parameterize a FMU</a><a id="Parameterize-a-FMU-1"></a><a class="docs-heading-anchor-permalink" href="#Parameterize-a-FMU" title="Permalink"></a></h1><p>Tutorial by Tobias Thummerer, Johannes Stoljar</p><p>Last update: 09.08.2023</p><p>ðŸš§ This tutorial is under revision and will be replaced by an up-to-date version soon ðŸš§</p><h2 id="License"><a class="docs-heading-anchor" href="#License">License</a><a id="License-1"></a><a class="docs-heading-anchor-permalink" href="#License" title="Permalink"></a></h2><pre><code class="language-julia hljs"># Copyright (c) 2021 Tobias Thummerer, Lars Mikelsons, Josef Kircher, Johannes Stoljar
# Licensed under the MIT license. 
# See LICENSE (https://github.com/thummeto/FMI.jl/blob/main/LICENSE) file in the project root for details.</code></pre><h2 id="Introduction"><a class="docs-heading-anchor" href="#Introduction">Introduction</a><a id="Introduction-1"></a><a class="docs-heading-anchor-permalink" href="#Introduction" title="Permalink"></a></h2><p>This example shows how to parameterize a FMU. We will show to possible ways to parameterize: The default option using the parameterization feature of <code>fmiSimulate</code>, <code>fmiSimulateME</code> or <code>fmiSimulateCS</code>. Second, a custom parameterization routine for advanced users. </p><h2 id="Other-formats"><a class="docs-heading-anchor" href="#Other-formats">Other formats</a><a id="Other-formats-1"></a><a class="docs-heading-anchor-permalink" href="#Other-formats" title="Permalink"></a></h2><p>Besides, this <a href="https://github.com/thummeto/FMI.jl/blob/examples/examples/jupyter-src/parameterize.ipynb">Jupyter Notebook</a> there is also a <a href="https://github.com/thummeto/FMI.jl/blob/examples/examples/jupyter-src/parameterize.jl">Julia file</a> with the same name, which contains only the code cells and for the documentation there is a <a href="https://github.com/thummeto/FMI.jl/blob/examples/examples/jupyter-src/parameterize.md">Markdown file</a> corresponding to the notebook.  </p><h2 id="Code-section"><a class="docs-heading-anchor" href="#Code-section">Code section</a><a id="Code-section-1"></a><a class="docs-heading-anchor-permalink" href="#Code-section" title="Permalink"></a></h2><p>To run the example, the previously installed packages must be included. </p><pre><code class="language-julia hljs"># imports
using FMI
using FMIZoo</code></pre><h3 id="Simulation-setup"><a class="docs-heading-anchor" href="#Simulation-setup">Simulation setup</a><a id="Simulation-setup-1"></a><a class="docs-heading-anchor-permalink" href="#Simulation-setup" title="Permalink"></a></h3><p>Next, the start time and end time of the simulation are set.</p><pre><code class="language-julia hljs">tStart = 0.0
tStop = 1.0
tSave = collect(tStart:tStop)</code></pre><pre><code class="nohighlight hljs">2-element Vector{Float64}:
 0.0
 1.0</code></pre><h3 id="Import-FMU"><a class="docs-heading-anchor" href="#Import-FMU">Import FMU</a><a id="Import-FMU-1"></a><a class="docs-heading-anchor-permalink" href="#Import-FMU" title="Permalink"></a></h3><p>In the next lines of code the FMU model from <em>FMIZoo.jl</em> is loaded and the information about the FMU is shown.</p><pre><code class="language-julia hljs"># we use an FMU from the FMIZoo.jl
# just replace this line with a local path if you want to use your own FMU
pathToFMU = get_model_filename(&quot;IO&quot;, &quot;Dymola&quot;, &quot;2022x&quot;)

fmu = loadFMU(pathToFMU)
info(fmu)</code></pre><pre><code class="nohighlight hljs">#################### Begin information for FMU ####################
	Model name:			IO
	FMI-Version:			2.0
	GUID:				{889089a6-481b-41a6-a282-f6ce02a33aa6}
	Generation tool:		Dymola Version 2022x (64-bit), 2021-10-08
	Generation time:		2022-05-19T06:53:52Z
	Var. naming conv.:		structured
	Event indicators:		4
	Inputs:				3


		352321536 [&quot;u_real&quot;]
		352321537 [&quot;u_boolean&quot;]
		352321538 [&quot;u_integer&quot;]
	Outputs:			3
		335544320 [&quot;y_real&quot;]
		335544321 [&quot;y_boolean&quot;]
		335544322 [&quot;y_integer&quot;]
	States:				0
	Parameters:			5
		16777216 [&quot;p_real&quot;]
		16777217 [&quot;p_integer&quot;]
		16777218 [&quot;p_boolean&quot;]
		16777219 [&quot;p_enumeration&quot;]
		134217728 [&quot;p_string&quot;]
	Supports Co-Simulation:		true
		Model identifier:	IO
		Get/Set State:		true
		Serialize State:	true
		Dir. Derivatives:	true
		Var. com. steps:	true
		Input interpol.:	true
		Max order out. der.:	1
	Supports Model-Exchange:	true
		Model identifier:	IO
		Get/Set State:		true
		Serialize State:	true
		Dir. Derivatives:	true
##################### End information for FMU #####################</code></pre><h3 id="Option-A:-Integrated-parameterization-feature-of-*FMI.jl*"><a class="docs-heading-anchor" href="#Option-A:-Integrated-parameterization-feature-of-*FMI.jl*">Option A: Integrated parameterization feature of <em>FMI.jl</em></a><a id="Option-A:-Integrated-parameterization-feature-of-*FMI.jl*-1"></a><a class="docs-heading-anchor-permalink" href="#Option-A:-Integrated-parameterization-feature-of-*FMI.jl*" title="Permalink"></a></h3><p>If you are using the commands for simulation integrated in <em>FMI.jl</em>, the parameters and initial conditions are set at the correct locations during the initialization process of your FMU. This is the recommended way of parameterizing your model, if you don&#39;t have very uncommon requirements regarding initialization.</p><pre><code class="language-julia hljs">dict = Dict{String, Any}()
dict</code></pre><pre><code class="nohighlight hljs">Dict{String, Any}()</code></pre><h3 id="Option-B:-Custom-parameterization-routine"><a class="docs-heading-anchor" href="#Option-B:-Custom-parameterization-routine">Option B: Custom parameterization routine</a><a id="Option-B:-Custom-parameterization-routine-1"></a><a class="docs-heading-anchor-permalink" href="#Option-B:-Custom-parameterization-routine" title="Permalink"></a></h3><p>If you have special requirements for initialization and parameterization, you can write your very own parameterization routine.</p><h3 id="Instantiate-and-Setup-FMU"><a class="docs-heading-anchor" href="#Instantiate-and-Setup-FMU">Instantiate and Setup FMU</a><a id="Instantiate-and-Setup-FMU-1"></a><a class="docs-heading-anchor-permalink" href="#Instantiate-and-Setup-FMU" title="Permalink"></a></h3><p>Next it is necessary to create an instance of the FMU. This is achieved by the command <code>fmiInstantiate!()</code>.</p><pre><code class="language-julia hljs">c = fmi2Instantiate!(fmu; loggingOn=true)</code></pre><pre><code class="nohighlight hljs">FMU:            IO
    InstanceName:   IO
    Address:        Ptr{Nothing} @0x00000243979379f0
    State:          0
    Logging:        true
    FMU time:       -Inf
    FMU states:     nothing</code></pre><p>In the following code block, start and end time for the simulation is set by the <code>fmiSetupExperiment()</code> command.</p><pre><code class="language-julia hljs">fmi2SetupExperiment(c, tStart, tStop)</code></pre><pre><code class="nohighlight hljs">0x00000000</code></pre><h3 id="Parameterize-FMU"><a class="docs-heading-anchor" href="#Parameterize-FMU">Parameterize FMU</a><a id="Parameterize-FMU-1"></a><a class="docs-heading-anchor-permalink" href="#Parameterize-FMU" title="Permalink"></a></h3><p>In this example, for each data type (<code>real</code>, <code>boolean</code>, <code>integer</code> and <code>string</code>) a corresponding input or parameter is selected. From here on, the inputs and parameters will be referred to as parameters for simplicity.</p><pre><code class="language-julia hljs">params = [&quot;p_real&quot;, &quot;p_boolean&quot;, &quot;p_integer&quot;, &quot;p_string&quot;]</code></pre><pre><code class="nohighlight hljs">4-element Vector{String}:
 &quot;p_real&quot;
 &quot;p_boolean&quot;
 &quot;p_integer&quot;
 &quot;p_string&quot;</code></pre><p>At the beginning we want to display the initial state of these parameters, for which the FMU must be in initialization mode. The next function <code>fmiEnterInitializationMode()</code> informs the FMU to enter the initialization mode. Before calling this function, the variables can be set. Furthermore, <code>fmiSetupExperiment()</code> must be called at least once before calling <code>fmiEnterInitializationMode()</code>, in order that the start time is defined.</p><pre><code class="language-julia hljs">fmi2EnterInitializationMode(c)</code></pre><pre><code class="nohighlight hljs">0x00000000</code></pre><p>The initial state of these parameters are displayed with the function <code>getValue()</code>.</p><pre><code class="language-julia hljs">getValue(c, params)</code></pre><pre><code class="nohighlight hljs">4-element Vector{Any}:
 0.0
 0
 0
  &quot;Hello World!&quot;</code></pre><p>The initialization mode is terminated with the function <code>fmi2ExitInitializationMode()</code>. (For the model exchange FMU type, this function switches off all initialization equations, and enters the event mode implicitly.)</p><pre><code class="language-julia hljs">fmi2ExitInitializationMode(c)</code></pre><pre><code class="nohighlight hljs">0x00000000</code></pre><p>In the next step, a function is defined that generates a random value for each parameter. For the parameter <code>p_string</code> a random number is inserted into the string. All parameters are combined to a tuple and output.</p><pre><code class="language-julia hljs">function generateRandomNumbers()
    rndReal = 100 * rand()
    rndBoolean = rand() &gt; 0.5
    rndInteger = round(Integer, 100 * rand())
    rndString = &quot;Random number $(100 * rand())!&quot;

    return rndReal, rndBoolean, rndInteger, rndString
end</code></pre><pre><code class="nohighlight hljs">generateRandomNumbers (generic function with 1 method)</code></pre><p>The previously defined function is called and the results are displayed in the console.</p><pre><code class="language-julia hljs">paramsVal = generateRandomNumbers()</code></pre><pre><code class="nohighlight hljs">(13.551497772573107, false, 16, &quot;Random number 34.42338820567652!&quot;)</code></pre><h4 id="First-variant"><a class="docs-heading-anchor" href="#First-variant">First variant</a><a id="First-variant-1"></a><a class="docs-heading-anchor-permalink" href="#First-variant" title="Permalink"></a></h4><p>To show the first variant, it is necessary to terminate and reset the FMU instance. Then, as before, the setup command must be called for the FMU. </p><pre><code class="language-julia hljs">fmi2Terminate(c)
fmi2Reset(c)
fmi2SetupExperiment(c, tStart, tStop)</code></pre><pre><code class="nohighlight hljs">0x00000000</code></pre><p>In the next step it is possible to set the parameters for the FMU. With the first variant it is quickly possible to set all parameters at once. Even different data types can be set with only one command. The command <code>setValue()</code> selects itself which function is chosen for which data type.  As long as the output of the function gives the status code 0, setting the parameters has worked.</p><pre><code class="language-julia hljs">setValue(c, params, collect(paramsVal))</code></pre><pre><code class="nohighlight hljs">4-element Vector{UInt32}:
 0x00000000
 0x00000000
 0x00000000
 0x00000000</code></pre><p>After setting the parameters, it can be checked whether the corresponding parameters were set correctly. For this the function <code>getValue()</code> can be used as above. To be able to call the function <code>getValue()</code> the FMU must be in initialization mode.</p><pre><code class="language-julia hljs">fmi2EnterInitializationMode(c)
# getValue(c, params)
fmi2ExitInitializationMode(c)</code></pre><pre><code class="nohighlight hljs">0x00000000</code></pre><p>Now the FMU has been initialized correctly, the FMU can be simulated. The <code>simulate()</code> command is used for this purpose. It must be pointed out that the keywords <code>instantiate=false</code>, <code>setup=false</code> must be set. The keyword <code>instantiate=false</code> prevents the simulation command from creating a new FMU instance, otherwise our parameterization will be lost. The keyword <code>setup=false</code> prevents the FMU from calling the initialization mode again. The additionally listed keyword <code>freeInstance=false</code> prevents that the instance is removed after the simulation. This is only needed in this example, because we want to continue working on the created instance. Another keyword is the <code>recordValues=parmas[1:3]</code>, which saves: <code>p_real</code>, <code>p_boolean</code> and <code>p_integer</code> as output. It should be noted that the <code>simulate()</code> function is not capable of outputting string values, so <code>p_string</code> is omitted.</p><pre><code class="language-julia hljs">simData = simulate(c, (tStart, tStop); recordValues=params[1:3], saveat=tSave, 
                        instantiate=false, setup=false, freeInstance=false, terminate=false, reset=false)</code></pre><pre><code class="nohighlight hljs">Model name:
	IO
Success:
	true
f(x)-Evaluations:
	In-place: 0
	Out-of-place: 0
Jacobian-Evaluations:
	âˆ‚xÌ‡_âˆ‚p: 0
	âˆ‚xÌ‡_âˆ‚x: 0
	âˆ‚xÌ‡_âˆ‚u: 0
	âˆ‚y_âˆ‚p: 0
	âˆ‚y_âˆ‚x: 0
	âˆ‚y_âˆ‚u: 0
	âˆ‚e_âˆ‚p: 0
	âˆ‚e_âˆ‚x: 0
	âˆ‚e_âˆ‚u: 0
	âˆ‚xr_âˆ‚xl: 0
Gradient-Evaluations:
	âˆ‚xÌ‡_âˆ‚t: 0
	âˆ‚y_âˆ‚t: 0
	âˆ‚e_âˆ‚t: 0
Callback-Evaluations:
	Condition (event-indicators): 0
	Time-Choice (event-instances): 0
	Affect (event-handling): 0
	Save values: 0
	Steps completed: 0
Values [2]:
	0.0	(13.551497772573107, 0.0, 16.0)
	1.0	(13.551497772573107, 0.0, 16.0)
Events [0]:</code></pre><h4 id="Second-variant"><a class="docs-heading-anchor" href="#Second-variant">Second variant</a><a id="Second-variant-1"></a><a class="docs-heading-anchor-permalink" href="#Second-variant" title="Permalink"></a></h4><p>To show the second variant, it is necessary to terminate and reset the FMU instance. Then, as before, the setup command must be called for the FMU. </p><pre><code class="language-julia hljs">fmi2Terminate(c)
fmi2Reset(c)
fmi2SetupExperiment(c, tStart, tStop)</code></pre><pre><code class="nohighlight hljs">0x00000000</code></pre><p>To make sure that the functions work it is necessary to generate random numbers again. As shown already, we call the defined function <code>generateRandomNumbers()</code> and output the values.</p><pre><code class="language-julia hljs">rndReal, rndBoolean, rndInteger, rndString = generateRandomNumbers()</code></pre><pre><code class="nohighlight hljs">(51.3912586357273, false, 88, &quot;Random number 35.88365345642421!&quot;)</code></pre><p>In the second variant, the value for each data type is set separately by the corresponding command. By this variant one has the maximum control and can be sure that also the correct data type is set. </p><pre><code class="language-julia hljs">fmi2SetReal(c, &quot;p_real&quot;, rndReal)
fmi2SetBoolean(c, &quot;p_boolean&quot;, rndBoolean)
fmi2SetInteger(c, &quot;p_integer&quot;, rndInteger)
fmi2SetString(c, &quot;p_string&quot;, rndString)</code></pre><pre><code class="nohighlight hljs">0x00000000</code></pre><p>To illustrate the functionality of the parameterization with the separate functions, the corresponding get function can be also called separately for each data type:</p><ul><li><code>fmi2SetReal()</code> &amp;#8660; <code>fmi2GetReal()</code></li><li><code>fmi2SetBoolean()</code> &amp;#8660; <code>fmi2GetBoolean()</code></li><li><code>fmi2SetInteger()</code> &amp;#8660; <code>fmi2GetInteger()</code></li><li><code>fmi2SetString()</code> &amp;#8660; <code>fmi2GetString()</code>.</li></ul><p>As before, the FMU must be in initialization mode.</p><pre><code class="language-julia hljs">fmi2EnterInitializationMode(c)
# fmi2GetReal(c, &quot;u_real&quot;)
# fmi2GetBoolean(c, &quot;u_boolean&quot;)
# fmi2GetInteger(c, &quot;u_integer&quot;)
# fmi2GetString(c, &quot;p_string&quot;)
fmi2ExitInitializationMode(c)</code></pre><pre><code class="nohighlight hljs">0x00000000</code></pre><p>From here on, you may want to simulate the FMU. Please note, that with the default <code>executionConfig</code>, it is necessary to prevent a new instantiation using the keyword <code>instantiate=false</code>. Otherwise, a new instance is allocated for the simulation-call and the parameters set for the previous instance are not transfered.</p><pre><code class="language-julia hljs">simData = simulate(c, (tStart, tStop); recordValues=params[1:3], saveat=tSave, 
                        instantiate=false, setup=false)</code></pre><pre><code class="nohighlight hljs">Model name:
	IO
Success:
	true
f(x)-Evaluations:
	In-place: 0
	Out-of-place: 0
Jacobian-Evaluations:
	âˆ‚xÌ‡_âˆ‚p: 0
	âˆ‚xÌ‡_âˆ‚x: 0
	âˆ‚xÌ‡_âˆ‚u: 0
	âˆ‚y_âˆ‚p: 0
	âˆ‚y_âˆ‚x: 0
	âˆ‚y_âˆ‚u: 0
	âˆ‚e_âˆ‚p: 0
	âˆ‚e_âˆ‚x: 0
	âˆ‚e_âˆ‚u: 0
	âˆ‚xr_âˆ‚xl: 0
Gradient-Evaluations:
	âˆ‚xÌ‡_âˆ‚t: 0
	âˆ‚y_âˆ‚t: 0
	âˆ‚e_âˆ‚t: 0
Callback-Evaluations:
	Condition (event-indicators): 0
	Time-Choice (event-instances): 0
	Affect (event-handling): 0
	Save values: 0
	Steps completed: 0
Values [2]:
	0.0	(51.3912586357273, 0.0, 88.0)
	1.0	(51.3912586357273, 0.0, 88.0)
Events [0]:</code></pre><h3 id="Unload-FMU"><a class="docs-heading-anchor" href="#Unload-FMU">Unload FMU</a><a id="Unload-FMU-1"></a><a class="docs-heading-anchor-permalink" href="#Unload-FMU" title="Permalink"></a></h3><p>The FMU will be unloaded and all unpacked data on disc will be removed.</p><pre><code class="language-julia hljs">unloadFMU(fmu)</code></pre><h3 id="Summary"><a class="docs-heading-anchor" href="#Summary">Summary</a><a id="Summary-1"></a><a class="docs-heading-anchor-permalink" href="#Summary" title="Permalink"></a></h3><p>Based on this tutorial it can be seen that there are two different variants to set and get parameters.These examples should make it clear to the user how parameters can also be set with different data types. As a small reminder, the sequence of commands for the manual parameterization of an FMU is summarized again. </p><p><code>loadFMU()</code> &amp;#8594; <code>fmiInstantiate!()</code> &amp;#8594; <code>fmiSetupExperiment()</code> &amp;#8594; <code>fmiSetXXX()</code> &amp;#8594; <code>fmiEnterInitializationMode()</code> &amp;#8594; <code>fmiGetXXX()</code> &amp;#8594; <code>fmiExitInitializationMode()</code> &amp;#8594; <code>simualte()</code> &amp;#8594; <code>unloadFMU()</code></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../simulate/">Â« Simulate</a><a class="docs-footer-nextpage" href="../inputs/">Inputs Â»</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.8.1 on <span class="colophon-date" title="Tuesday 11 February 2025 15:52">Tuesday 11 February 2025</span>. Using Julia version 1.11.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
